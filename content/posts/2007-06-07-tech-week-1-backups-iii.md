---
title: 'Tech Week #1 – Backups – III'
author: Miguel Alho
type: post
date: 2007-06-07T18:10:00+00:00
url: /tech-week-1-backups-iii/
categories:
  - 'Code &amp; IT'
tags:
  - Aplicações
  - equipamento
  - Tech Week
  - técnica

---
No <a href="http://mytymyky.blogspot.com/2007/06/tech-week-1-backups-ii_05.html" target="_blank">ultimo post</a>, falei sobre os meios tecnológicos que podem ser usados para suportar os dados do backup. Vamos ver melhor alguns esquemas de utilização.A melhor escolha para a tua situação dependerá naturalmente da quantidade dos dados que geras, e a importância das mesmas.

<span style="font-weight:bold;">Organiza-te!</span>  
Algo que ajuda imenso na decisão dos métodos de backup ideais está ligado à organização que dás aos dados. Tudo ao molho complica ou limita as decisões. Já uma boa organização da informação poderá simplificar em muito o processo.

Por exemplo, usar pastas bem seleccionadas para suportar os conteúdos. Uma pasta para trabalhos com subpastas de cada trabalho; Uma pasta dedicada a fotografias com pastas para o tipo de imagem (trabalho, familiar, produções finais, impressões); Pastas para os multimédia &#8211; musicas, filmes, livros electrónicos, podcasts&#8230;). Este tipo de separação ajuda em muito a classificar os dados quanto à sua importância. Trabalhos, são sem duvida, dos dados mais valiosos que se tem, pois geralmente são as que dedicamos mais tempo a criar. Documentos, relatórios, produções de imagem, base de dados, etc&#8230; Se bem que, depois de realizar a primeira vez, poderão ser novamente efectuadas, a perda de tempo necessário para a reprodução é insuportável. Logo estes são os dados que tem de ser salvaguardados em primeiro lugar e mais frequentemente.

Para esse efeito, o CD ou DVD é a melhor solução. São baratos, e tem uma capacidade suficiente para suportar muitos dados, sem exagerar. Se determinado projecto ou conjunto de projectos rondar os 500MB de dados, um DVD, pode ser utilizado para armazenar umas 8 versões dos dados. A gravação é rápida, é barata o que admite múltiplas cópias de dados, e são óptimos para arquivo. No caso de fotografias, é muito fácil organizar sessões de imagens por data e ir inserindo em DVDs á medida que se tenham acumulados imagens suficientes. Considerando as dimensões dos ficheiros que as máquinas habitualmente gerem, facilmente se enche um DVD. De qualquer forma, este é o tipo de dados que é muito importante &#8220;ir guardando&#8221;. É muito importante fazer periodicamente o backup da informação. Diário, semanal, mensal&#8230; depende da quantidade e frequência de criação de dados. O mais difícil, especialmente tendo em conta que exige a acção directa do utilizador, é mesmo criar uma agenda de backups e mantê-lo. 

Uma opção também interessantes é usar espaço web para armazenar versões dos ficheiros. Este é particularmente útil se as dimensões dos ficheiros são reduzidos (até alguns megas). Basta ao fim do dia de trabalho enviar o ficheiro por FTP para o servidor. Se a maquina local falhar, há uma cópia remota que poderá ser recuperada.

Se a situação de &#8220;acção directa&#8221; incomodar, uma solução mais automatizada é necessária. Neste caso, discos externos são ideais. Existe diversos softwares que permitem efectuar cópias de segurança dos dados. E facilmente podem ser colocados numa drive externa. O próprio Windows XP já inclui um aplicativo de backups. Podem encontra-lo navegando no menu de programas a <span style="font-style:italic;">Programas -> Ferramentas do Sistema -> Backup</span>. 

O Backup do Windows uma aplicação extremamente simples, e muitas vezes desconhecida (eu mesmo descobri-o há muito pouco tempo). Podes definir quais as pastas a armazenar, e onde armazená-los. Geralmente é gerado um ficheiro com o backup efectuado. Também é possível agendar a tarefa do backup criado, com a frequência desejada e no modo desejado &#8211; completo, incremental, diferencial, etc&#8230; Podes por exemplo seleccionar as pastas importantes e guarda-los num ficheiro, outros dados noutro backup, os dados do sistema noutro. Cada backup é um ficheiro (com os restantes ficheiros guardados lá dentro.. podem imagina-lo como um zip. Localmente (isto é guardando os dados de um computador no próprio computador), é bastante eficiente. Uma grande vantagem que tem é que consegue efectuar copias de ficheiros em uso &#8211; como o ficheiro do Outlook que geralmente está sempre aberto. Se os ficheiros gerados forem pequenos, podem ser facilmente armazenados num DVD para arquivar, ou copiar para um disco que fica off-line. Um artigo sobre o backup do Windows que recomendo é <a href="http://www.zdnetasia.com/smb/features/0,39043755,39393168-1,00.htm" target="_blank">10 things you should know about Windows XP Backup</a>.

Infelizmente não está muito documentado (ou na altura tive dificuldade em encontrar a informação que eu queria). Já o utilizei nalguns ambientes mais complexos &#8211; guardando os dados de dois computadores para o mesmo disco. Basicamente cada computador fazia o seu backup para uma pasta própria num disco externo ligado a uma das máquinas. No disco da própria máquina, tudo corria ás mil maravilhas. Do computador ligado por rede, por vezes não encontrava a pasta partilhada/ficheiro onde devia armazenar o backup efectuado. Também, agendar a tarefa tendo em conta permissões da AD pode ser mais complexo do que possa parecer&#8230; Um último problema era que cada backup duplicava os dados (apesar de ter escolhido backups diferenciais) e facilmente enchia o disco (cada backup gerava cerca de 60GB). Não sei bem como, mas eventualmente (suponho) a aplicação fazia um backup completo dos dados e livrava o espaço das versões completas e diferenciais anteriores. Mas localmente, funcionava (e ainda funciona) na perfeição.

O backup do Windows é óptimo porque é simples e gratuito. No entanto há outros aplicativos no mercado. WinBackup e soluções da Norton são exemplos. Por vezes os próprios discos externos tem software proprietários que permitem fazer backups. Podem ser soluções que vão ao encontro das tuas necessidades.

Acabamos de ver que os dados importantes e gerados mais frequentemente devem ser prioritariamente salvaguardados. Guardar versões também é útil &#8211; sempre é uma cópia extra, mesmo que não completa. Num projecto em que estou a trabalhar actualmente, o meu backup é, na prática, diário. Não só serve como forma de entrega, mas garanto a salvaguarda de múltiplas cópias do ficheiro, mesmo que incompletas (mas que com um pouco de trabalho, ficam &#8220;refeitas&#8221;). Agora como tratar os dados menos frequentes, e menos importantes. Um exemplo são músicas e vídeos, podcasts, publicações web, etc. 

Vale a pena criar um backup com esses dados? Depende da importância que lhes dás. Boa parte desse tipo de dados é geralmente &#8220;descartável&#8221;. Digo descartável porque boa parte é de uso temporário. Vemos o filme ou podcast uma ou duas vezes e nunca mais lhe mexemos. O mesmo acontece com alguns álbuns. Mais, boa parte desses dados podem ser readquiridos sem grande esforço. Cabe então a cada um escolher o que é importante e se compensa o pequeno ou grande investimento nos meios para armazenar a info. Recomendaria armazenar os conteúdos mais utilizados ou favoritos, no mínimo, e também materiais, quer vídeo, áudio ou literário didáctico (por ser uma referência que se consulta com frequência) em arquivos externos como o DVD.

Se o investimento não for problema, conjuntos de discos externos podem ser uma solução. Manter um conjunto em ligação continua ao computador e utilizar um segundo conjunto para guardar o backup e armazenar off-line. Rotatividade periódica dos discos pode ser interessante, mas é necessário ter cuidado para não eliminar cópias únicas de ficheiros no processo de troca. Mais informação fica concentrada num espaço fisicamente mais pequeno.

<span style="font-weight:bold;">NAS</span>  
Estas soluções são óptimas para um computador singular. Mas se se trata de uma rede de computares (doméstico) a coisa fica mais complicada. Imagina a situação de uma família com vários PCs (pa  
is + filhos), ou uma pequena empresa com vários PCs funcionamento. Todos usam o seu próprio computador para gerar dados. A solução mais óbvia e comuns é cada um ficar responsável pela salvaguarda dos seus dados. Mas porque será natural existir uma pequena rede interna, com ou sem fios, e é muito natural que haja partilha de informação (especialmente multimédia), uma solução de centralização de dados poderá ser uma mais valia. Um NAS será sem duvida uma óptima escolha.

Como vimos anteriormente, o NAS significa Network Access Storage, ou seja armazenamento em rede. Neste cenário, teremos um ou vários servidores cuja função é exclusivamente armazenar informação. Para o cenário caseiro, computadores tornados obsoletos podem ser recuperados para esta função, já que não necessitam de ser muito exigentes ao nível de requisitos de processamento. O equivalente a um Pentium IV é mais que óptimo. Basta a placa de rede rápida e memória RAM extra. Para esta situação, o sistema operativo Linux é muito apropriado pelos poucos recursos que exige, especialmente para as versões server que não tem ambiente gráfico, e a disponibilidade de software gratuito e dedicado à função.

São também conhecidos como &#8220;file servers&#8221; por fazerem isso mesmo &#8211; servir ficheiros. Cada utilizador da casa poderá ter uma quota de espaço pessoal no servidor e um conjunto de pastas acessíveis a todos. Multimédia pode ser distribuído pelas pastas partilhadas; documentos e trabalhos pelas pastas pessoais. Este armazenamento centralizado pode complementar o armazenamento pessoal ligado directamente a cada computador e servir de cópia complementar. O backup a partir do servidor de ficheiros torna-se simples, pois é um backup dos ficheiros da própria máquina. Até pode haver uma segunda máquina dedicada ao processo do backup, salvaguardando os dados no servidor de ficheiros E os das maquinas individuais, se necessário. 

O NAS apresentado no último exemplo, como servidor de ficheiro, pode servir para efectuar backups, mas não parece estar optimizado para o processo devido á falta de automatização. Mas se lhe dermos essa característica, torna-se uma ferramenta poderosa na salvaguarda dos nossos dados. Para obter essa autonomia, basta inserir-lhe um software que permita buscar, de forma automática e periódica, os ficheiros a cada computador ligado na rede. Conseguindo isso, terá um computador dedicado ao processo dos backups de todas as maquinas ligadas na rede. Automaticamente. No caso do Windows, não conheço o software (penso que a Norton tem e provavelmente alguma versão cara do WinBackup permite isso), mas para o Linux, existe uma aplicação interessante chamado BackupPC, e que faz isso mesmo. E não está limitado a backups a maquinas Linux; correctamente configurado consegue efectuar os backups a máquinas Windows e MAC (lindo, né?). Nesta máquina, RAID e/ou rotatividade de discos são óptimas adições para melhorar a configuração e aumentar a segurança! Por ser centralizado, exige alguns cuidados extras, como garantir que a maquina esteja ligada nas horas importantes do backup, e alguma protecção contra falhas de energia ou picos de tensão.

<span style="font-weight:bold;">Tipos de backup</span>  
Um conceito que me esqueci de explicar foi o dos tipos de backup, mais propriamente os que mencionei já neste post. Essencialmente há dois tipos, e ligados á forma como é efectuado a copia. São o &#8220;full backup&#8221; (completo) e o incremental. No completo, todos os dados são armazenados/copiados. No incremental, apenas os novos ou alterados desde o último backup completo são acrescentados. Geralmente o processo de backup inicia-se com um backup completo, segue uma temporada (uma semana por exemplo) com backups incrementais periódicos, e após algum tempo efectua novamente o backup completo. O processo é cíclico. Este processo de utilização de incrementais é mais eficiente, por exigir menos tempo de transferência de dados e ocupar menos espaço.

Os restantes modos, cópia, diário, diferencial, etc.. são derivados destes. Estes que mencionei são específicos da aplicação do backup do Windows.

<span style="font-weight:bold;">Os problemas que não devem ser esquecidos!</span>  
Por fim, vou mencionar apenas alguns problemas que devem ser tidos em conta com backups, e pensados para os percaver, e mencionados no site do <a href="http://www.backupcritic.com/how-to-backup/types-of-backup.html" target="_blank">Backup Critic</a>:

<span style="font-style:italic;">O problema da frequência</span> &#8211; imagina que passaste um dia completo á volta de um ficheiro, e no fim do dia por distracção, apagaste-o. Lá se foi o dia de trabalho! Meso que efectuasses o backup diário, essa periodicidade não foi suficiente para evitar a perda de alguma informação. Existe sempre um período finito de risco de perda. 

<span style="font-style:italic;">O problema da distância</span> &#8211; estas longe de casa, e, apesar de efectuares backups frequentemente, houve um desastre (como um incêndio) que te destruiu todos os meios de armazenamento. É para estes tipo de casos que a adição de uma solução remota é importante, pelo emnso para os ficheiros mais importantes.

<span style="font-weight:bold;">O problema da retenção</span> &#8211; este prende-se com o numero de cópias de backups efectuados. Imagina que um vírus ataca o sistema, mas só o descobres após algumas semanas. Nesse período continuaste a efectuar backups do sistema, mas que se sobrepuseram a copias do sistema quando estava limpa. O que poderia ser simples (limpar o vírus e repor o sistema limpo) ficou complicado por não teres cópias do sistema quando estava limpa.

<span style="font-weight:bold;">O problema da obsulência</span> &#8211; trata-se de meios&#8230; vamos supor que tinhas um trabalho importantíssimo que realizaste há uns valente anos e que estavam armazenados em floppies .. do grandes! Vamos supor que hoje precisas desses mesmos dados. como recuperar? hoje em dia é quase impossível encontrar máquinas com esse tipo de drive de leitura. O mesmo está prestes a funcionar com os sistemas Beta/VHS e CDs, e algum tempo mais para a frente será os DVDs.

<span style="font-weight:bold;">O problema da degradação do meio</span> &#8211; nenhum material é perfeito. Uma das razões para o backup é guardar os dados precavendo avarias, mas os materiais em que guardamos cópias também podem se estragar!. Convém periodicamente verificar o estado dessas cópias para garantir que estão acessíveis. Este é um problema grave que irá afectar muitas famílias ao nível de das fotografias digitais. Um dia, sem saber, os CDs com as únicas cópias das fotos estão inúteis e as imagens perdidas para sempre.

Como podem ver existe sempre um factor de risco extra, mesmo efectuando backups&#8230;

Por hoje é tudo. Para a próximo deverei descrever melhor o processo de backup que tenho em mente, para os meus futuros backups.

<span style="font-weight:bold;">A Serie TechWeek#1 &#8211; Backups</span>  
<a href="http://mytymyky.blogspot.com/2007/06/tech-week-1-backups-i.html" target="_blank">Backups I &#8211; O porquê;</a>  
<a href="http://mytymyky.blogspot.com/2007/06/tech-week-1-backups-ii_05.html" target="_blank">Backups II &#8211; Os conceitos e tecnologias;</a>  
<a href="http://mytymyky.blogspot.com/2007/06/tech-week-1-backups-iii.html" target="_blank">Backups III &#8211; Soluções, Tipos, e problemas</a>